<ion-view>
  <ion-nav-title>{{ pitch.title }}</ion-nav-title>
  <ion-nav-buttons side="secondary">
    <button class="button button-icon button-favorite ng-hide fade" ng-show="pitch" ng-class="{ 'ion-ios-heart': isFavorite, 'ion-ios-heart-outline': !isFavorite }" on-release="favoritePitch()"></button>
  </ion-nav-buttons>
  <ion-content ng-show="pitch" class="ng-hide fade">

    <div class="blocky blocky-balanced balanced-bg text-featurette text-center light" ng-show="canContribute">
      <span ng-show="canContribute === 1">Pitched In</span>
      <span ng-show="canContribute === 2">You created this pitch</span>
      <span ng-show="canContribute === 3">Pitch succesfully funded</span>
    </div>

    <div class="card-image" background-image="pitch.image" on-tap="showModalPhoto()">
      <div class="card-overlay vertical-center-container">
        <h3 class="vertical-center text-featurette text-center">{{ pitch.title }}</h3>
      </div>
    </div>

    <div class="button-bar" ng-hide="canContribute">
      <button class="button button-clean button-balanced">{{ pitch.price | currency }}</button>
      <button class="button button-clean button-outline button-balanced" on-tap="showModalPitch()">Pitch In</button>
    </div>

    <button class="button button-clean button-block-no-margin button-positive icon-left ion-ios-people">
      {{ pitch.pitchers.contributed.length }} / {{ pitch.pitchers.required }} contributed
    </button>

    <button class="button button-clean-bottom button-outline button-block-no-margin button-positive icon-left ion-ios-calendar-outline" on-tap="addCalendarEvent()">
      {{ pitch.date | date }}
    </button>

    <div class="padding">
      <p class="text-featurette card-header">What You're Getting</p>
      <p class="card-text no-margin">{{ pitch.description }}</p>
    </div>

    <div>
      <p class="text-featurette card-header padding no-margin"><i class="icon ion-ios-location assertive"></i> Where To Meet</p>
      <leaflet data-tap-disabled="true" id="mapPitchLocation" defaults="map.defaults" center="map.center" markers="map.markers" width="100%" height="200px"></leaflet>
    </div>

    <div>
      <div class="padding">
        <div class="background-thumbnail background-rounded" background-image="pitch.creator.image"></div>
        <div>
          <p class="text-small text-featurette no-margin color-gray">Organizer</p>
          <p class="text-featurette no-margin">{{ pitch.creator.name.first + ' ' + pitch.creator.name.last }}</p>
          <p><stars class="energized" repeat="rating"></stars></p>
        </div>
      </div>
      <div class="button-bar button-bar-distinct">
        <button class="button button-clean button-light icon-left ion-ios-person-outline">View Profile</button>
        <button class="button button-clean button-light icon-left ion-ios-email-outline">Contact {{ pitch.creator.name.first }}</button>
      </div>
    </div>

  </ion-content>
</ion-view>
